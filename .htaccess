Options -Indexes
RewriteEngine On

# Pass Authorization header to PHP (for Apache servers)
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]

# Skip rewriting for actual files and directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Explicit API endpoints
RewriteRule ^api/generate_otp$ api/generate_otp.php [QSA,L]
RewriteRule ^api/verify_otp$ api/verify_otp.php [QSA,L]

# Generic rewrite: map /path to /path.php when that file exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([A-Za-z0-9/_-]+)/?$ $1.php [QSA,L]

# Fallback to index.php for any other routes
RewriteRule ^(.*)$ index.php [QSA,L]